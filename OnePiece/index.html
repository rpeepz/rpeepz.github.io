<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grand Line Duels</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">
    
    <!-- Meta Information -->
    <meta name="description" content="Grand Line Duels - A strategic card battle game featuring characters from the One Piece universe">
    <meta name="author" content="rpeepz">
    <meta name="creator" content="rpeepz">
    <meta name="copyright" content="¬© 2026 rpeepz. One Piece ¬© Eiichiro Oda">
    <meta property="og:title" content="Grand Line Duels">
    <meta property="og:description" content="Strategic card battle game featuring One Piece characters">
    <meta property="og:type" content="website">
    <meta name="robots" content="index, follow">

    <!-- PeerJS for WebRTC P2P connections -->
    <script src="https://unpkg.com/peerjs@1.5.1/dist/peerjs.min.js"></script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>

    <!-- Theme Toggle -->
    <div id="theme-toggle" class="theme-toggle">
        <span class="theme-toggle-icon" id="theme-icon">üåô</span>
        <span id="theme-text">Dark</span>
    </div>

    <!-- Battle Music Audio -->
    <audio id="battle-music" loop>
        <source src="https://quicksounds.com/uploads/tracks/143341674_950320944_1102458802.mp3" type="audio/mpeg">
    </audio>

    <!-- Draft War Music Audio -->
    <audio id="draft-war-music" loop>
        <source src="https://us-tuna-sounds-files.voicemod.net/86e570ed-a8db-490d-abde-cdf5a3ad9a40-1664011058207.mp3" type="audio/mpeg">
    </audio>

    <!-- Music Control Widget -->
    <div id="music-control" class="music-control">
        <button id="music-control-close" class="music-control-close">√ó</button>
        <!-- <h4>üéµ Battle Music</h4> -->
        <div class="volume-controls">
            <button id="volume-full" class="volume-btn active">üîä</button>
            <button id="volume-half" class="volume-btn">üîà</button>
            <button id="volume-mute" class="volume-btn">üîá</button>
        </div>
    </div>

    <!-- Login/Profile Screen -->
    <div id="login-screen" class="screen active">
        <div class="container">
            <h1>‚öîÔ∏è Grand Line Duels ‚öîÔ∏è</h1>
            <div class="login-options">
                <button id="guest-btn" class="btn btn-primary">Play as Guest</button>
                <button id="create-profile-btn" class="btn btn-secondary">Create Profile</button>
                <button id="login-btn" class="btn btn-secondary">Login to Profile</button>
            </div>
            <div id="profile-form" class="hidden">
                <input type="text" id="username-input" placeholder="Enter username" maxlength="20">
                <input type="password" id="password-input" placeholder="Enter password (optional for guest)">
                <button id="submit-profile-btn" class="btn btn-primary">Submit</button>
                <button id="cancel-btn" class="btn btn-secondary">Cancel</button>
            </div>
            <a href="https://square.link/u/T6XoDQMr" target="_blank" class="support-link">
                <button class="btn btn-support">‚òï Buy Me a Coffee</button>
            </a>
        </div>
    </div>

    <!-- Lobby Screen -->
    <div id="lobby-screen" class="screen">
        <div class="container">
            <div class="header">
                <h2>Welcome, <span id="player-name" class="my-username"></span>!
                    <a href="#" id="claim-profile-link" class="claim-profile-link hidden">Claim Profile</a>
                </h2>
                <div style="display: flex; gap: 10px;">
                    <button id="clear-data-btn" class="btn btn-small btn-danger">Clear Data</button>
                    <button id="logout-btn" class="btn btn-small">Logout</button>
                </div>
            </div>
            
            <div class="stats">
                <p>Points: <span id="user-points">0</span> ‚≠ê | Wins: <span id="wins">0</span> | Losses: <span id="losses">0</span> | Cards Collected: <span id="cards-collected">0</span> | Win Streak: <span id="user-streak">0</span> üî• | Arcs Unlocked: <span id="arcs-unlocked">3</span>/20 üèùÔ∏è</p>
            </div>

            <div class="pool-status-lobby hidden" id="pool-status-lobby">
                <span class="pool-status-label">Card Pool:</span>
                <span id="lobby-pool-count">0</span> / 25 cards selected
                <!-- <span class="pool-status-hint">(Games will use your pool if set)</span> -->
            </div>

            <div class="lobby-actions">

                <!-- Duel against a Bot -->
                <div class="section">
                    <h3>ü§ñ Duel vs Bot (Offline)</h3>
                    <button id="play-bot-btn" class="btn btn-primary">Duel vs Bot</button>
                    <div id="difficulty-selector" class="hidden">
                        <h4>Select Difficulty:</h4>
                        <div class="difficulty-buttons">
                            <button class="btn btn-difficulty" data-difficulty="EASY">
                                <span class="difficulty-icon">üòä</span>
                                <span class="difficulty-name">Easy</span>
                                <span class="difficulty-desc">F, D, C cards</span>
                            </button>
                            <button class="btn btn-difficulty" data-difficulty="NORMAL">
                                <span class="difficulty-icon">üôÇ</span>
                                <span class="difficulty-name">Normal</span>
                                <span class="difficulty-desc">D, C, B cards</span>
                            </button>
                            <button class="btn btn-difficulty" data-difficulty="HARD">
                                <span class="difficulty-icon">üò†</span>
                                <span class="difficulty-name">Hard</span>
                                <span class="difficulty-desc">B, A, S cards</span>
                            </button>
                            <button class="btn btn-difficulty" data-difficulty="EXPERT">
                                <span class="difficulty-icon">üòà</span>
                                <span class="difficulty-name">Expert</span>
                                <span class="difficulty-desc">A, S, SS cards</span>
                            </button>
                            <button class="btn btn-difficulty" data-difficulty="LEGENDARY">
                                <span class="difficulty-icon">üíÄ</span>
                                <span class="difficulty-name">Legendary</span>
                                <span class="difficulty-desc">S, SS, SSS cards</span>
                            </button>
                        </div>
                        <button id="cancel-bot-btn" class="btn btn-secondary">Cancel</button>
                    </div>
                </div>

                <!-- Join Duel Lobby -->
                <div class="section">
                    <h3>Join a Duel</h3>
                    <input type="text" id="join-code-input" placeholder="Enter Duel code" maxlength="30">
                    <button id="join-game-btn" class="btn btn-primary">Join Duel</button>
                    <p class="connection-status hidden" id="join-status">Connecting...</p>
                
                </div>

                <!-- Host Duel Lobby -->
                <div class="section">
                    <h3>Host a Duel</h3>
                    <button id="host-game-btn" class="btn btn-primary">Create Lobby</button>
                    <div id="lobby-code-display" class="hidden">
                        <p>Share this code with your opponent:</p>
                        <div class="lobby-code-box">
                            <span id="lobby-code"></span>
                            <button id="copy-link-btn" class="btn btn-secondary">üìã Copy Join Link</button>
                            <button id="close-lobby-btn" class="btn btn-danger">‚ùå Close Lobby</button>
                        </div>
                        <p id="connection-status"></p>
                    </div>
                </div>

                <!-- Play Draft War -->
                <div class="section">
                    <h3>üè¥‚Äç‚ò†Ô∏è Draft War Mode (NEW)</h3>
                    <button id="play-draft-war-btn" class="btn btn-primary">Play Draft War</button>
                </div>
                
                <!-- Open Lobbies Browser -->
                <div class="section">
                    <h3>üåê Open Lobbies</h3>
                    <div class="lobby-browser-tabs">
                        <button class="lobby-tab-btn active" data-type="duel">‚öîÔ∏è Duels</button>
                        <button class="lobby-tab-btn" data-type="draft-war">üè¥‚Äç‚ò†Ô∏è Draft Wars</button>
                    </div>
                    <div class="lobby-list" id="lobby-list">
                        <p class="lobby-list-empty">No open lobbies found. Create one!</p>
                    </div>
                    <button id="refresh-lobbies-btn" class="btn btn-secondary btn-small">üîÑ Refresh</button>
                </div>
            </div>

            <!-- Collection -->
            <div class="section">
                <h3>Your Collection</h3>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button id="view-collection-btn" class="btn btn-secondary">View Cards</button>
                    <button id="view-admin-btn" class="btn btn-secondary">‚öôÔ∏è Admin Panel</button>
                    <button id="show-music-btn" class="btn btn-secondary hidden">üéµ Show Music Player</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Card Shop Screen -->
    <div id="shop-screen" class="screen">
        <div class="container">
            <div class="header">
                <h2>‚≠ê Card Shop ‚≠ê</h2>
                <button id="back-to-lobby-shop-btn" class="btn btn-small">Back to Lobby</button>
            </div>
            
            <div class="shop-stats">
                <div class="shop-stat-item">
                    <div class="shop-stat-label">Your Points</div>
                    <div class="shop-stat-value" id="shop-user-points">0</div>
                </div>
                <div class="shop-stat-item">
                    <div class="shop-stat-label">Win Streak</div>
                    <div class="shop-stat-value" id="shop-user-streak">0 üî•</div>
                </div>
            </div>
            
            <div class="shop-info">
                <h3>üí∞ Earn Points:</h3>
                <ul>
                    <li>Duel Win: 10 pts (√óperformance grade)</li>
                    <li>Draft War Win: 25 pts (√óperformance grade)</li>
                    <li>Loss: 2-5 pts (consolation)</li>
                    <li>Win Streak Bonus: Up to √ó2.0 at 20 streak!</li>
                </ul>
            </div>
            
            <h3>üé¥ Available Cards:</h3>
            <div class="shop-inventory" id="shop-inventory">
                <!-- Cards will be generated here -->
            </div>

            <!-- Arc Shop Section -->
            <div class="arc-shop-section">
                <h3>üèùÔ∏è Story Arc Unlocks üèùÔ∏è</h3>
                <p class="arc-shop-description">Unlock new story arcs to access exclusive cards and expand your collection!</p>
                <div class="arc-shop-grid" id="arc-shop-grid">
                    <!-- Arc unlock cards will be generated here -->
                </div>
            </div>

            <!-- Arc Card Packs Section -->
            <div class="arc-packs-section" id="arc-packs-section">
                <h3>üì¶ Arc Card Packs üì¶</h3>
                <p class="arc-packs-description">Purchase random cards from unlocked arcs!</p>
                <div class="arc-packs-grid" id="arc-packs-grid">
                    <!-- Arc pack cards will be generated here -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Collection Screen -->
    <div id="collection-screen" class="screen">
        <div class="container">
            <div class="header">
                <h2>Card Collection</h2>
                <button id="back-to-lobby-btn" class="btn btn-small">Back to Lobby</button>
            </div>
            <div class="filter-section">
                <select id="saga-filter">
                    <option value="all">All Sagas</option>
                </select>
                <select id="arc-filter">
                    <option value="all">All Arcs</option>
                </select>
                <label class="filter-checkbox">
                    <input type="checkbox" id="owned-only-filter">
                    <span>Show Only Owned Cards</span>
                </label>
                <label class="filter-checkbox">
                    <input type="checkbox" id="sort-by-power-filter">
                    <span>Sort by Highest Power</span>
                </label>
                <label class="filter-checkbox hidden" id="pool-first-sort-container">
                    <input type="checkbox" id="pool-first-sort">
                    <span>‚≠ê Pool Cards First</span>
                </label>
                <label class="filter-checkbox pool-mode-toggle hidden" id="pool-mode-toggle">
                    <input type="checkbox" id="pool-selection-mode">
                    <span>‚≠ê Pool Selection Mode</span>
                </label>
                <select id="rarity-filter" class="filter-select">
                    <option value="all">All Rarities</option>
                    <option value="SSS">SSS - Legendary</option>
                    <option value="SS">SS - Mythic</option>
                    <option value="S">S - Epic</option>
                    <option value="A">A - Rare</option>
                    <option value="B">B - Uncommon</option>
                    <option value="C">C - Common</option>
                    <option value="D">D - Basic</option>
                    <option value="F">F - Starter</option>
                </select>
            </div>
            <div class="pool-status hidden" id="pool-status-display">
                <span id="pool-count">0</span> / <span id="pool-max">25</span> cards in pool
            </div>
            <div id="collection-grid" class="card-grid"></div>
        </div>
    </div>
    
    <!-- Admin Panel Screen -->
    <div id="admin-screen" class="screen">
        <div class="admin-panel">
            <!-- Back button in its own row at top -->
            <div class="admin-header">
                <button id="back-to-lobby-admin-btn" class="btn btn-secondary">‚Üê Back to Lobby</button>
            </div>

            <!-- Arc Availability - Full width -->
            <section class="admin-section admin-section-full">
                <h3>Arc Availability</h3>
                <p class="help-text">Toggle which arcs are available in the card pool</p>
                <div id="arc-toggles" class="arc-toggles">
                    <!-- Arc toggles will be generated here -->
                </div>
            </section>

            <!-- Rarity Distribution - Full width -->
            <section class="admin-section admin-section-full">
                <h3>Rarity Distribution</h3>
                <div id="rarity-stats" class="rarity-stats">
                    <!-- Rarity statistics will be shown here -->
                </div>
            </section>

            <!-- Three columns for Card Pool Status, Test Deck, and Points Granter -->
            <div class="admin-bottom-grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                <section class="admin-section">
                    <h3>Card Pool Status</h3>
                    <div id="pool-stats" class="pool-stats">
                        <p>Total Cards in Database: <strong id="total-cards">0</strong></p>
                        <p>Available Cards: <strong id="available-cards">0</strong></p>
                        <p>Active Arcs: <strong id="active-arcs">0</strong></p>
                    </div>
                </section>

                <section class="admin-section">
                    <h3>Test Starter Deck</h3>
                    <button id="test-deck-btn" class="btn btn-primary">Generate Test Deck</button>
                    <div id="test-deck-display" class="test-deck-display"></div>
                </section>
                
                <section class="admin-section" id="points-granter-section">
                    <h3>üí∞ Points Granter</h3>
                    <div class="points-granter">
                        <div class="points-granter-controls">
                            <button id="points-minus-btn" class="btn btn-danger">-</button>
                            <div class="points-granter-display">
                                <span id="points-multiplier">1</span> √ó 10 = <strong id="points-grant-value">10</strong> pts
                            </div>
                            <button id="points-plus-btn" class="btn btn-primary">+</button>
                        </div>
                        <button id="grant-points-btn" class="btn btn-primary" style="margin-top: 15px; width: 100%;">Grant Points</button>
                        <p style="margin-top: 10px; font-size: 12px; color: var(--text-secondary);">
                            Current Balance: <strong id="current-points-balance">0</strong> pts
                        </p>
                    </div>
                </section>

                <section class="admin-section">
                    <h3>üèÜ Win Simulator</h3>
                    <div class="win-simulator">
                        <p style="font-size: 12px; color: var(--text-secondary); margin-bottom: 10px;">
                            Test arc unlock notifications by simulating wins
                        </p>
                        <button id="simulate-win-btn" class="btn btn-success" style="width: 100%; margin-bottom: 8px;">+1 Win</button>
                        <button id="simulate-5-wins-btn" class="btn btn-success" style="width: 100%; margin-bottom: 8px;">+5 Wins</button>
                        <button id="simulate-10-wins-btn" class="btn btn-success" style="width: 100%;">+10 Wins</button>
                        <p style="margin-top: 10px; font-size: 12px; color: var(--text-secondary);">
                            Current Wins: <strong id="current-wins-count">0</strong>
                        </p>
                    </div>
                </section>
            </div>
            
        </div>
    </div>

    <!-- Draft War Select Screen -->
    <div id="draft-war-select-screen" class="screen">
        <div class="container">
            <div class="header">
                <h2>‚öîÔ∏è Draft War Mode ‚öîÔ∏è</h2>
                <button id="back-from-team-select-btn" class="btn btn-small">Back to Lobby</button>
            </div>
            
            <div class="draft-war-mode-selection">
                <div class="mode-card" id="davy-back-mode">
                    <h3>üè¥‚Äç‚ò†Ô∏è Davy Back Fight</h3>
                    <p class="mode-description">High risk, high reward</p>
                    <div class="role-list">
                        <span class="role-badge captain">Captain (√ó2.0)</span>
                        <span class="role-badge vice">Vice-Captain (√ó1.5)</span>
                        <span class="role-badge tank">Tank (√ó1.3)</span>
                        <span class="role-badge healer">Healer (√ó1.2)</span>
                        <span class="role-badge support">Support (√ó1.1)</span>
                        <span class="role-badge traitor">Traitor (√ó-0.5)</span>
                    </div>
                    <button class="btn btn-primary select-mode-btn" data-mode="DAVY_BACK">Play</button>
                </div>
                
                <div class="mode-card" id="classic-pirate-mode">
                    <h3>üíÄ Classic Pirate</h3>
                    <p class="mode-description">Balanced team composition</p>
                    <div class="role-list">
                        <span class="role-badge captain">Captain (√ó2.0)</span>
                        <span class="role-badge vice">Vice-Captain (√ó1.5)</span>
                        <span class="role-badge tank">Tank (√ó1.3)</span>
                        <span class="role-badge healer">Healer (√ó1.2)</span>
                        <span class="role-badge support">Support (√ó1.1)</span>
                        <span class="role-badge support">Support (√ó1.1)</span>
                    </div>
                    <button class="btn btn-primary select-mode-btn" data-mode="CLASSIC_PIRATE">Play</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Draft War Wager Screen -->
    <div id="draft-war-wager-screen" class="screen">
        <div class="container">
            <div class="header">
                <h2>Set Your Wager</h2>
                <button id="back-from-wager-btn" class="btn btn-small">Back</button>
            </div>
            
            <p class="wager-description">How many cards should the winner take from the loser?</p>
            
            <div class="wager-selector">
                <button class="btn wager-btn" data-wager="1">1 Card</button>
                <button class="btn wager-btn" data-wager="2">2 Cards</button>
                <button class="btn wager-btn" data-wager="3">3 Cards</button>
                <!-- <button class="btn wager-btn" data-wager="5">5 Cards</button> -->
            </div>
            
            <div class="difficulty-selector" id="draft-war-difficulty">
                <h4>Select Bot Difficulty:</h4>
                <div class="difficulty-buttons">
                    <button class="btn btn-difficulty" data-difficulty="EASY">
                        <span class="difficulty-icon">üòä</span>
                        <span class="difficulty-name">Easy</span>
                    </button>
                    <button class="btn btn-difficulty" data-difficulty="NORMAL">
                        <span class="difficulty-icon">üôÇ</span>
                        <span class="difficulty-name">Normal</span>
                    </button>
                    <button class="btn btn-difficulty" data-difficulty="HARD">
                        <span class="difficulty-icon">üò†</span>
                        <span class="difficulty-name">Hard</span>
                    </button>
                    <button class="btn btn-difficulty" data-difficulty="EXPERT">
                        <span class="difficulty-icon">üòà</span>
                        <span class="difficulty-name">Expert</span>
                    </button>
                    <button class="btn btn-difficulty" data-difficulty="LEGENDARY">
                        <span class="difficulty-icon">üíÄ</span>
                        <span class="difficulty-name">Legendary</span>
                    </button>
                </div>
            </div>

<div id="draft-war-p2p-options" class="section hidden">
    <h4>Online Draft War:</h4>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
        <div>
            <h5>Host Game:</h5>
            <button id="tb-host-game-btn" class="btn btn-primary">Create Lobby</button>
            <div id="tb-lobby-code-display" class="hidden" style="margin-top: 15px;">
                <p>Lobby Code: <strong id="tb-lobby-code"></strong></p>
                <button id="tb-copy-link-btn" class="btn btn-secondary" style="margin-bottom: 10px;">üìã Copy Join Link</button>
                <button id="tb-close-lobby-btn" class="btn btn-danger" style="margin-bottom: 10px;">‚ùå Close Lobby</button>
                <p class="connection-status" id="tb-connection-status">Waiting...</p>
            </div>
        </div>
        <div>
            <h5>Join Game:</h5>
            <input type="text" id="tb-join-code-input" placeholder="Enter Draft War code" style="width: 100%; margin-bottom: 10px;">
            <button id="tb-join-game-btn" class="btn btn-primary">Join Game</button>
            <p class="connection-status hidden" id="tb-join-status">Connecting...</p>
        </div>
    </div>
</div>
        </div>
    </div>

    <!-- Draft War Assignment Screen -->
    <div id="draft-war-game-screen" class="screen">
        <div class="container">
            <div class="draft-war-header">
                <div class="draft-war-info">
                    <h3 id="tb-player1-name">Player 1</h3>
                    <p class="draft-war-score">Wager: <span id="tb-player1-wager">1</span> card(s)</p>
                </div>
                <div class="assignment-phase">
                    <p>Assignment Phase: <span id="tb-phase">1</span>/6</p>
                    <p id="tb-turn-indicator">Your Turn</p>
                </div>
                <div class="draft-war-info">
                    <h3 id="tb-player2-name">Player 2</h3>
                    <p class="draft-war-score">Wager: <span id="tb-player2-wager">1</span> card(s)</p>
                </div>
            </div>

            <!-- Card Draw Area (above teams) -->
            <div id="tb-card-selection" class="tb-card-selection-top">
                <!-- Card draw area will be rendered here -->
            </div>

            <!-- Role Assignment Controls -->
            <div id="tb-assignment-controls" class="assignment-controls hidden">
                <h3>Assign <span id="tb-selected-card-name"></span> to Role:</h3>
                <div id="tb-role-buttons" class="role-buttons"></div>
            </div>

            <!-- Teams Display -->
            <div class="draft-war-board">
                <div class="draft-war-column" id="tb-player1-column">
                    <h4>Your Team</h4>
                    <div class="role-slots" id="tb-player1-slots"></div>
                </div>
                
                <div class="vs-divider">VS</div>
                
                <div class="draft-war-column" id="tb-player2-column">
                    <h4>Opponent Team</h4>
                    <div class="role-slots" id="tb-player2-slots"></div>
                </div>
            </div>

            <button id="tb-concede-btn" class="btn btn-danger">Concede</button>
        </div>
    </div>

    <!-- Draft War Results Screen -->
    <div id="draft-war-results-screen" class="screen">
        <div class="container">
            <h1 id="tb-result-title"></h1>
            <div id="tb-result-stats"></div>
            
            <div class="draft-war-comparison">
                <div class="final-team">
                    <h3 id="tb-final-p1-name">Your Team</h3>
                    <div id="tb-final-p1-roles" class="final-roles"></div>
                    <p class="final-score">Total: <span id="tb-final-p1-score"></span></p>
                </div>
                
                <div class="final-team">
                    <h3 id="tb-final-p2-name">Opponent Team</h3>
                    <div id="tb-final-p2-roles" class="final-roles"></div>
                    <p class="final-score">Total: <span id="tb-final-p2-score"></span></p>
                </div>
            </div>
            
            <div id="tb-cards-won-display" class="hidden">
                <h3>Cards Won:</h3>
                <div id="tb-cards-won-grid" class="card-grid"></div>
            </div>
            
            <button id="tb-return-lobby-btn" class="btn btn-primary">Return to Lobby</button>
            <a href="https://square.link/u/T6XoDQMr" target="_blank" class="support-link">
                <button class="btn btn-support">‚òï Enjoyed the game? Support me!</button>
            </a>
        </div>
    </div>
    
    <!-- Game Screen -->
    <div id="game-screen" class="screen">
        <div class="container">
            <div class="game-header">
                <div class="player-info" id="player1-info">
                    <h3 id="player1-name">Player 1</h3>
                    <p>Cards: <span id="player1-cards">5</span></p>
                    <div class="score-display">Score: <span id="player1-score">0</span></div>
                </div>
                <div class="round-info">
                    <p>Round <span id="round-number">1</span>/<span id="max-rounds">5</span></p>
                </div>
                <div class="player-info" id="player2-info">
                    <h3 id="player2-name">Player 2</h3>
                    <p>Cards: <span id="player2-cards">5</span></p>
                    <div class="score-display">Score: <span id="player2-score">0</span></div>
                </div>
            </div>

            <div class="game-board">
                <div class="card-slot" id="player1-card-slot">
                    <div class="card-back"><img src="img/back.png" alt="Card Back"></div>
                </div>
                <div class="vs">VS</div>
                <div class="card-slot" id="player2-card-slot">
                    <div class="card-back"><img src="img/back.png" alt="Card Back"></div>
                </div>
            </div>

            <div class="game-controls">
                <button id="play-card-btn" class="btn btn-primary btn-large">Play Card</button>
                <button id="concede-btn" class="btn btn-danger">Concede</button>
            </div>

            <div id="waiting-message" class="waiting-message hidden">
                Waiting for opponent...
            </div>

            <div id="result-display" class="result-display hidden">
                <h2 id="result-text"></h2>
                <button id="continue-btn" class="btn btn-primary">Continue</button>
            </div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameover-screen" class="screen">
        <div class="container">
            <h1 id="gameover-result"></h1>
            <div id="gameover-stats"></div>
            <div id="cards-won-display" class="hidden">
                <h3>Cards Won:</h3>
                <div id="cards-won-grid" class="card-grid"></div>
            </div>
            <button id="return-lobby-btn" class="btn btn-primary">Return to Lobby</button>
            <a href="https://square.link/u/T6XoDQMr" target="_blank" class="support-link">
                <button class="btn btn-support">‚òï Enjoyed the game? Support me!</button>
            </a>
        </div>
    </div>

    <script src="js/dev-config.js"></script>
    <script src="js/config.js"></script>
    <script src="js/points-system.js"></script>
    <script src="js/music.js"></script>
    <script src="js/lobby-manager.js"></script>
    <script src="js/p2p.js"></script>
    <script src="js/game.js"></script>
    <script src="js/team-battle.js"></script>
    <script src="js/main.js"></script>
    <!-- Scroll to Top Button -->
    <div id="scroll-top-btn" class="scroll-top"></div>
    
    <!-- Footer -->
    <footer id="site-footer" class="site-footer">
        <p id="version-info">v1.1 | Last Updated: January 2026</p>
        <p class="credits">¬© 2026 Grand Line Duels | One Piece ¬© Eiichiro Oda/Shueisha, Inc.</p>
        <details style="margin-top: 8px;">
            <summary style="cursor: pointer; color: var(--maya-blue); font-size: 12px; font-weight: 600; transition: color 0.2s;">üìö Sources, Credits & Acknowledgments</summary>
            <div style="margin-top: 10px; font-size: 11px; text-align: left; max-width: 700px; margin: 10px auto; line-height: 1.6;">
                <p style="margin-bottom: 8px;"><strong>üéÆ Game Design & Development:</strong></p>
                <p style="margin-left: 15px; margin-bottom: 10px;">Created by <strong>rpeepz</strong> (2026) ‚Ä¢ <a href="https://square.link/u/T6XoDQMr" target="_blank" style="color: var(--maya-blue);">Support the Developer</a></p>
                
                <p style="margin-bottom: 8px;"><strong>üíª Technology Stack:</strong></p>
                <p style="margin-left: 15px; margin-bottom: 10px;">
                    ‚Ä¢ WebRTC P2P: <a href="https://peerjs.com/" target="_blank" style="color: var(--maya-blue);">PeerJS</a><br>
                    ‚Ä¢ Frontend: Vanilla JavaScript, CSS3, HTML5<br>
                    ‚Ä¢ Local Storage API for data persistence
                </p>
                
                <p style="margin-bottom: 8px;"><strong>üìñ Content & Resources:</strong></p>
                <p style="margin-left: 15px; margin-bottom: 10px;">
                    ‚Ä¢ Manga/Anime: <em>One Piece</em> ¬© Eiichiro Oda/Shueisha, Toei Animation<br>
                    ‚Ä¢ Character Data: <a href="https://onepiece.fandom.com/" target="_blank" style="color: var(--maya-blue);">One Piece Wiki (Fandom)</a><br>
                    ‚Ä¢ Character Images: Various fan art & official sources<br>
                    ‚Ä¢ Card Rarity System: Inspired by TCG/CCG mechanics
                </p>
                
                <p style="margin-bottom: 8px;"><strong>üéµ Audio Assets:</strong></p>
                <p style="margin-left: 15px; margin-bottom: 10px;">
                    ‚Ä¢ Battle Music: <a href="https://quicksounds.com/" target="_blank" style="color: var(--maya-blue);">QuickSounds</a><br>
                    ‚Ä¢ Draft War Music: <a href="https://www.voicemod.net/" target="_blank" style="color: var(--maya-blue);">Voicemod Soundboard</a>
                </p>
                
                <p style="margin-bottom: 8px;"><strong>üé® Design Elements:</strong></p>
                <p style="margin-left: 15px; margin-bottom: 10px;">
                    ‚Ä¢ Color Palette: Inspired by One Piece aesthetics<br>
                    ‚Ä¢ Card Design: Original implementation<br>
                    ‚Ä¢ UI/UX: Responsive design for all devices
                </p>
                
                <p style="margin-bottom: 8px;"><strong>‚ö° Features:</strong></p>
                <p style="margin-left: 15px; margin-bottom: 10px;">
                    ‚Ä¢ P2P Multiplayer (No Server Required)<br>
                    ‚Ä¢ Offline Bot Battles (5 Difficulty Levels)<br>
                    ‚Ä¢ Draft War Mode (Davy Back Fight & Classic Pirate)<br>
                    ‚Ä¢ Card Collection System (163 Unique Characters)<br>
                    ‚Ä¢ Character Type System with Synergy Bonuses<br>
                    ‚Ä¢ Dynamic Rarity Distribution<br>
                    ‚Ä¢ Dark/Light Mode Toggle<br>
                    ‚Ä¢ Profile System with Local Save
                </p>
                
                <p style="margin-bottom: 8px;"><strong>üìú Legal & Disclaimer:</strong></p>
                <p style="margin-left: 15px; margin-bottom: 10px; font-size: 10px; opacity: 0.9;">
                    This is a fan-made, non-commercial project created for entertainment purposes only. 
                    All One Piece characters, names, and related indicia are trademarks of Eiichiro Oda and Shueisha, Inc. 
                    This game is not affiliated with, endorsed by, or connected to the official One Piece franchise. 
                    No copyright infringement is intended.
                </p>
                
                <p style="text-align: center; margin-top: 15px; padding-top: 10px; border-top: 1px solid var(--border-color);">
                    <strong>Special Thanks:</strong> The One Piece community, beta testers, and all players! üè¥‚Äç‚ò†Ô∏è
                </p>
            </div>
        </details>
    </footer>

    <!-- Card Detail Modal -->
    <div id="card-detail-modal" class="modal">
        <div class="modal-content card-detail-content">
            <button id="close-modal-btn" class="close-modal-btn">‚úï</button>
            <div id="modal-card-display" class="modal-card-display">
                <!-- Card will be rendered here -->
            </div>
        </div>
    </div>
</body>
</html>
